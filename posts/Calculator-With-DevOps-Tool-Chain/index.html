<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Calculator With Devops Tool Chain" /><meta property="og:locale" content="en" /><meta name="description" content="DockerHub Profile: https://hub.docker.com/r/pilaniya1337/calculator GitHub Profile:https://github.com/mukeshpilaniya/calculator" /><meta property="og:description" content="DockerHub Profile: https://hub.docker.com/r/pilaniya1337/calculator GitHub Profile:https://github.com/mukeshpilaniya/calculator" /><link rel="canonical" href="https://mukeshpilaniya.github.io/posts/Calculator-With-DevOps-Tool-Chain/" /><meta property="og:url" content="https://mukeshpilaniya.github.io/posts/Calculator-With-DevOps-Tool-Chain/" /><meta property="og:site_name" content="pilaniya@home:~$" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-12T00:00:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Calculator With Devops Tool Chain" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-08-17T23:12:04+05:30","datePublished":"2020-04-12T00:00:00+05:30","description":"DockerHub Profile: https://hub.docker.com/r/pilaniya1337/calculator GitHub Profile:https://github.com/mukeshpilaniya/calculator","headline":"Calculator With Devops Tool Chain","mainEntityOfPage":{"@type":"WebPage","@id":"https://mukeshpilaniya.github.io/posts/Calculator-With-DevOps-Tool-Chain/"},"url":"https://mukeshpilaniya.github.io/posts/Calculator-With-DevOps-Tool-Chain/"}</script><title>Calculator With Devops Tool Chain | pilaniya@home:~$</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="pilaniya@home:~$"><meta name="application-name" content="pilaniya@home:~$"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/12998935?s=400&u=0874b267fd66e5fea11f5181868ddae3c58e0a93&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">pilaniya@home:~$</a></div><div class="site-subtitle font-italic">Learn.unlearn.relearn</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/mukeshpilaniya" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pilaniyamukesh0','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Calculator With Devops Tool Chain</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Calculator With Devops Tool Chain</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1586629800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 12, 2020 </em> </span> <span> Updated <em class="" data-ts="1660758124" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 17, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/mukeshpilaniya">Mukesh Pilaniya</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1449 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p>DockerHub Profile: <a href="https://hub.docker.com/r/pilaniya1337/calculator">https://hub.docker.com/r/pilaniya1337/calculator</a> <br /> GitHub Profile:<a href="https://github.com/mukeshpilaniya/calculator">https://github.com/mukeshpilaniya/calculator</a></p><h3 id="required-tools--"><span class="mr-2">Required Tools: -</span><a href="#required-tools--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Git (source code management)<li>Docker (container node)<li>Eclipse /IntelliJ (Project IDE)<li>Jenkins (Continuous Integration: git, Continuous testing: Junit)<li>Maven (Continuous Build)<li>Rundeck (continuous deployment)<li>ELK (elastic search, Logstash, Kibana: continuous monitoring)</ul><h3 id="installing-git--"><span class="mr-2">Installing Git: -</span><a href="#installing-git--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>git
</pre></table></code></div></div><h3 id="installing-docker--"><span class="mr-2">Installing Docker: -</span><a href="#installing-docker--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt <span class="nb">install </span>apt-transport-https ca-certificates curl software-properties-common
curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg | <span class="nb">sudo </span>apt-key add
<span class="nb">sudo </span>add-apt-repository <span class="s2">"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable"</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>docker-ce
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>
</pre></table></code></div></div><h3 id="installing-eclipse-ide--httpswwweclipseorgdownloads"><span class="mr-2">Installing Eclipse IDE:- <a href="https://www.eclipse.org/downloads/"><span class="mr-2">https://www.eclipse.org/downloads/</a></span><a href="#installing-eclipse-ide--httpswwweclipseorgdownloads" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h3 id="installing-jenkins--"><span class="mr-2">Installing Jenkins: -</span><a href="#installing-jenkins--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>Download the war file<br /> <a href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war">http://mirrors.jenkins.io/war-stable/latest/jenkins.war</a><li>Run the war file<br /> <code class="language-plaintext highlighter-rouge">java -jar jenkins.war</code><li>Got to url <a href="http://localhost:8080/">http://localhost:8080</a></ol><h3 id="jenkins-plugins--"><span class="mr-2">Jenkins Plugins: -</span><a href="#jenkins-plugins--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>Rundeck plugin<li>Docker plugin<li>Logstash plugin</ol><h3 id="configure-plugin-"><span class="mr-2">Configure plugin:-</span><a href="#configure-plugin-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Logstash plugin automatically create calculator index in elasticsearch</p><p><img data-src="/blog/assets/calculator/1.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/2.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/3.png" alt="" data-proofer-ignore></p><h3 id="installing-maven--"><span class="mr-2">Installing Maven: -</span><a href="#installing-maven--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> <span class="nb">sudo </span>apt <span class="nb">install </span>maven
 mvn <span class="nt">-version</span>
</pre></table></code></div></div><h3 id="installing-rundeck--"><span class="mr-2">Installing Rundeck: -</span><a href="#installing-rundeck--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>Download rundeck from<br /> https://download.rundeck.org/deb/rundeck_3.2.6.20200427-1_all.deb<li>install using dpkg<br /> <code class="language-plaintext highlighter-rouge">dpkg -i rundeck\_3.2.6.20200427-1\_all.deb</code><li>Rundeck start and stop command<br /> <code class="language-plaintext highlighter-rouge">sudo service rundeckd start</code><br /> <code class="language-plaintext highlighter-rouge">sudo service rundeckd stop</code><li>Default address, username, password<br /> Default address: http://localhost:4440<br /> default username and password: admin<li>Allow rundeck to execute sudo commands on system terminal without password enter super user mode<ol><li>open file visudo<br /> <code class="language-plaintext highlighter-rouge">sudo visudo</code><li>Add following lines at end of the file<br /> <code class="language-plaintext highlighter-rouge">rundeck ALL=(ALL) NOPASSWD: ALL</code><br /> <code class="language-plaintext highlighter-rouge">Localhost ALL=(ALL) NOPASSWD: ALL</code></ol></ol><h3 id="create-a-new-project-and-job-in-rundeck-"><span class="mr-2">Create a new Project and job in Rundeck:-</span><a href="#create-a-new-project-and-job-in-rundeck-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p>Go to the url <a href="http://localhost:4440/">http://localhost:4440</a> and create a new project name as calculator and save it. <img data-src="/blog/assets/calculator/4.png" alt="" data-proofer-ignore></p><li><p>Create a new job in the same project, enter jobname and job group <img data-src="/blog/assets/calculator/5.png" alt="" data-proofer-ignore></p><li>Navigate to workflow section and add the following commands to execute on registered node<ol><li>command 1 to replace old jar file with new jar file<br /> <code class="language-plaintext highlighter-rouge">sudo docker cp /var/lib/jenkins/workspace/Calculator\ Build/target/Calculator.jar calculator:/</code><li>Command 2 to start calculator container<br /> <code class="language-plaintext highlighter-rouge">sudo docker start calculator</code><li>Command 3 to pass argument to calculator jar file<br /> <code class="language-plaintext highlighter-rouge">sudo docker exec -t calculator java -cp calculator.jar org.iiitb.calculator.App 3 4 2</code></ol><li><p>Under Nodes select execute locally because all these commands will be executed on the local system. <img data-src="/blog/assets/calculator/6.png" alt="" data-proofer-ignore></p><li>Make note of UUID for future reference and save the job. <img data-src="/blog/assets/calculator/7.png" alt="" data-proofer-ignore></ol><h3 id="elk-installing--"><span class="mr-2">ELK Installing: -</span><a href="#elk-installing--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="step-1-installing-elasticsearch--"><span class="mr-2">Step 1 installing elasticsearch: -</span><a href="#step-1-installing-elasticsearch--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>Set java 8 as default java versionAllow rundeck to execute sudo commands on system terminal without password<li>enter super user mode<li>open file visudo<br /> <code class="language-plaintext highlighter-rouge">sudo visudo</code><li>Add following lines at end of the file<br /> <code class="language-plaintext highlighter-rouge">rundeck ALL=(ALL) NOPASSWD: ALL</code><br /> <code class="language-plaintext highlighter-rouge">Localhost ALL=(ALL) NOPASSWD: ALL</code><li>download Elasticsearch followed by public signing key<br /> <code class="language-plaintext highlighter-rouge">sudo wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -</code><li>install the apt-transport-https package<br /> <code class="language-plaintext highlighter-rouge">sudo apt-get install apt-transport-https</code><li>Add the repository<br /> <code class="language-plaintext highlighter-rouge">echo "deb https://artifacts.elastic.co/packages/6.x/apt stable main" | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list</code><li>Update the repo list and install the package<br /> <code class="language-plaintext highlighter-rouge">sudo apt-get update</code><br /> <code class="language-plaintext highlighter-rouge">sudo apt-get install elasticsearch</code><li>Update the repo list and install the package<br /> <code class="language-plaintext highlighter-rouge">sudo vim /etc/elasticsearch/elasticsearch.yml</code><li>Uncomment "network.host" and "http.port". Following configuration should be added<br /> network.host: localhost<br /> http.port: 9200<li>Start ElasticSearch<br /> <code class="language-plaintext highlighter-rouge">sudo systemctl start elasticsearch.service</code></ol><h4 id="step-2-installing-kibana-"><span class="mr-2">Step 2 installing kibana:-</span><a href="#step-2-installing-kibana-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>Let's start installing Kibana now and modify Kibana settings<br /> <code class="language-plaintext highlighter-rouge">sudo apt-get install kibana</code><br /> <code class="language-plaintext highlighter-rouge">sudo vim /etc/kibana/kibana.yml</code><li>Uncomment following lines:<br /> server.port: 5601<br /> server.host: "localhost"<br /> elasticsearch.url: <a href="http://localhost:9200/">http://localhost:9200</a><li>start Kibana service<br /> <code class="language-plaintext highlighter-rouge">sudo systemctl start kibana.service</code><li>Goto <a href="http://localhost:5601/">http://localhost:5601</a></ol><h4 id="step-3-installing-logstash--"><span class="mr-2">Step 3 installing logstash: -</span><a href="#step-3-installing-logstash--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>sudo apt-get install logstash<li>sudo service logstash start<li>Got to http://localhost:4440<br /> http://localhost:9200</ol><h3 id="sdlc--"><span class="mr-2">SDLC: -</span><a href="#sdlc--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="development-phase--"><span class="mr-2">Development Phase: -</span><a href="#development-phase--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The development of this project is happened in java and it is a maven-based project. The src/main/java directory contains the project source code and the src/test/java directory contains the test cases like unit testing.</p><p><img data-src="/blog/assets/calculator/8.png" alt="" data-proofer-ignore></p><p><strong>The next step is executing these commands: -</strong><br /> <code class="language-plaintext highlighter-rouge">mvn clean</code> - command attempt to clean target folder files that are generated during the build by maven<br /> <code class="language-plaintext highlighter-rouge">mvn package</code> - command convert the entire maven project into an executable jar package</p><h3 id="pom-xml-file--"><span class="mr-2">Pom xml file: -</span><a href="#pom-xml-file--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To perform unit testing we have to add Junit dependency and maven-jar-plugin for creating a package. It will create a package with a name calculator.</p><p><img data-src="/blog/assets/calculator/9.png" alt="" data-proofer-ignore></p><p>After executing these commands, a target folder is generated automatically which contains our artifacts file calculator.jar. To test this artifact, copy this artifacts file and run the below command in the same directory. <code class="language-plaintext highlighter-rouge">java -cp calculator.jar org.iiitb.calculator.App</code><br /> org.iiitb.calculator is a package name and App is a class name where calculator methods are defined.</p><h3 id="docker-file--"><span class="mr-2">Docker file: -</span><a href="#docker-file--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>create a 'Dockerfile' under project level (at same level of pom.xml)</p><div class="language-dockerfile highlighter-rouge"><div class="code-header"> <span data-label-text="Dockerfile"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># Start with a base image containing Java runtime</span>
<span class="k">FROM</span><span class="s"> openjdk:8</span>
<span class="c"># Add Maintainer Info</span>
<span class="k">LABEL</span><span class="s"> maintainer="github.com/mukeshpilaniya"</span>
<span class="c"># Add a volume pointing to /tmp</span>
<span class="k">EXPOSE</span><span class="s"> 8080</span>
<span class="c"># Add the application's jar to the container</span>
<span class="k">ADD</span><span class="s"> /target/calculator.jar calculator.jar</span>
<span class="c"># Run the jar file</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["java","-cp","calculator.jar","org.iiitb.calculator.App"]</span>
</pre></table></code></div></div><p>The next step is, create a repository(calculator) in github and push project code into calculator repository. The following set of commands will push the code into github repository.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>git init
git remote add origin <span class="s2">"https://github.com/mukeshpilaniya/calculator.git"</span>
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s2">"initial commit"</span>
git push origin master.
</pre></table></code></div></div><p><img data-src="/blog/assets/calculator/10.png" alt="" data-proofer-ignore></p><h3 id="build-a-docker-image--"><span class="mr-2">Build a docker Image: -</span><a href="#build-a-docker-image--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Enter the following command in the terminal with the home directory of project<br /> <code class="language-plaintext highlighter-rouge">sudo docker build -t calculator\_image .</code> This command will create project specific docker image(calculator_image), now create a container of this image using the following command<br /> <code class="language-plaintext highlighter-rouge">sudo run --name calculator\_container -d calculator\_image</code></p><h3 id="software-development-life-cycle--"><span class="mr-2">Software Development life cycle: -</span><a href="#software-development-life-cycle--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The whole project is developed following the DevOps model and using various tools. The software development Life Cycle of this project includes six stages</p><ol><li>Source Control Management (git)<li>Code Building (maven)<li>Code testing (Junit)<li>Build and Publish Docker image (Docker)<li>Deploying (Rundeck)<li>Monitoring (ELK)</ol><h3 id="setup-jenkins-pipeline"><span class="mr-2">Setup jenkins Pipeline:</span><a href="#setup-jenkins-pipeline" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="1-job1-calculator-scm"><span class="mr-2">1. Job1: Calculator SCM:</span><a href="#1-job1-calculator-scm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>SCM stands for source code management and used for managing the source code of the application, for this project source code is stored in a git repository hosted on GitHub at mukeshpilaniya/calculator. Here we are using pollSCM which checks the git repository after an interval and if there is a change in the code it triggers the pipeline otherwise it doesn't do anything.<br /> Create a FreeStyle project names as calculator SCM and following is the configuration in this step <img data-src="/blog/assets/calculator/11.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/12.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/13.png" alt="" data-proofer-ignore></p><h4 id="2-job2-calculator-build"><span class="mr-2">2. Job2: Calculator Build:</span><a href="#2-job2-calculator-build" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This step build triggers automatically when the first job is finished and it will build a jar file in the jenkins working directory if the build is successful it will automatically trigger the calculator Test job. Create a maven project name as calculator Build and following is the configuration in this step. <img data-src="/blog/assets/calculator/14.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/15.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/16.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/17.png" alt="" data-proofer-ignore></p><h4 id="3-job3-calculatortest--"><span class="mr-2">3. Job3: CalculatorTest: -</span><a href="#3-job3-calculatortest--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>If the build is successful then the calculator test job will automatically be triggered. it will build the docker image and push it into dockerhub. This job will run test cases and send the control to the calculator deploy. Create a maven project name as calculator Test and Configuration of this step is as follows.<br /> Create a Maven Project and name its calculator Test <img data-src="/blog/assets/calculator/18.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/19.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/20.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/21.png" alt="" data-proofer-ignore></p><h4 id="4-job4-calculator-deploy--"><span class="mr-2">4. Job4: calculator deploy: -</span><a href="#4-job4-calculator-deploy--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This job will automatically trigger if the calculator test job is successfully executed and it will trigger the specified rundeck job.<br /> Create a FreeStyle project and name it as a calculator deploy. Configuration of this step is as follows.<br /> Rundeck instance: rundeck<br /> Copy the job UUID in job identifier id in Post Build Actions → Rundeck<br /> <img data-src="/blog/assets/calculator/22.png" alt="" data-proofer-ignore> <img data-src="/blog/assets/calculator/23.png" alt="" data-proofer-ignore></p><h3 id="create-pipeline-view--"><span class="mr-2">Create Pipeline View: -</span><a href="#create-pipeline-view--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Click on + icon and do following configuration <img data-src="/blog/assets/calculator/24.png" alt="" data-proofer-ignore></p><p>Click Ok and select calculator SCM as Initial Job under Pipeline Flow. Then click save. <img data-src="/blog/assets/calculator/25.png" alt="" data-proofer-ignore></p><h3 id="pipeline-view-layout--"><span class="mr-2">Pipeline View Layout: -</span><a href="#pipeline-view-layout--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="/blog/assets/calculator/26.png" alt="" data-proofer-ignore></p><h3 id="create-index-in-kibana-and-visualize-through-graph--"><span class="mr-2">Create index in kibana and Visualize through graph: -</span><a href="#create-index-in-kibana-and-visualize-through-graph--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>Go to url <a href="http://localhost:5601/">http://localhost:5601</a><li><p>To create kibana index pattern navigate to Management-&gt;under kibana section choose index pattern and create new index pattern name as "calculator*". Click on next step and choose @Timestamp options <img data-src="/blog/assets/calculator/27.png" alt="" data-proofer-ignore></p><li><p>To see the log navigate to discover-&gt; select calculator as index pattern <img data-src="/blog/assets/calculator/28.png" alt="" data-proofer-ignore></p><li><p>To visualize logs navigate to Visualize-&gt;click on + icon -&gt;select one of map type-&gt;select calculator* index -&gt;select appropriate fields-&gt;click on run-&gt;save -&gt;name as calculator 1<br /> Create 3-4 graph and save as calculator 1, calculator 2, calculator 3 <img data-src="/blog/assets/calculator/29.png" alt="" data-proofer-ignore></p><li>To create a Dashboard of calculator, navigate to Dashboard &gt;click on add-&gt;in search bar type calculator it will show calculator 1,2 and 3 select all of these and save the dashboard name as Calculator. <img data-src="/blog/assets/calculator/30.png" alt="" data-proofer-ignore></ol><h3 id="results-and-execution--"><span class="mr-2">Results and execution: -</span><a href="#results-and-execution--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>When new features are introduced in a project, then from its building, testing, deployment and monitoring is done in an automated manner.<br /> We first write code for addition method and latter add subtract, multiplication and division method. output of each method as we added in our project code</p><p><img data-src="/blog/assets/calculator/31.png" alt="" data-proofer-ignore></p><p><img data-src="/blog/assets/calculator/32.png" alt="" data-proofer-ignore></p><p><img data-src="/blog/assets/calculator/33.png" alt="" data-proofer-ignore></p><p><img data-src="/blog/assets/calculator/34.png" alt="" data-proofer-ignore></p><h3 id="conclusion--"><span class="mr-2">Conclusion: -</span><a href="#conclusion--" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>DevOps tools help in automating the task of building, testing, releasing, deploying, operating and monitoring in a convenient and efficient way with enormous speed. Manual intervention prone to errors but automated environments are not. Data sharing techniques are used effectively to connect Devs with Ops.</p><p>References: -<br /> [1] GitHub project: <a href="https://github.com/mukeshpilaniya/calculator">https://github.com/mukeshpilaniya/calculator</a><br /> [2] DockerHub profile: <a href="https://hub.docker.com/u/pilaniya1337">https://hub.docker.com/u/pilaniya1337</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/docker/'>Docker</a>, <a href='/categories/springboot/'>Springboot</a>, <a href='/categories/jenkins/'>Jenkins</a>, <a href='/categories/elk/'>ELK</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a> <a href="/tags/hibernate/" class="post-tag no-text-decoration" >hibernate</a> <a href="/tags/jenkins/" class="post-tag no-text-decoration" >jenkins</a> <a href="/tags/elk/" class="post-tag no-text-decoration" >elk</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Calculator+With+Devops+Tool+Chain+-+pilaniya%40home%3A~%24&url=https%3A%2F%2Fmukeshpilaniya.github.io%2Fposts%2FCalculator-With-DevOps-Tool-Chain%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Calculator+With+Devops+Tool+Chain+-+pilaniya%40home%3A~%24&u=https%3A%2F%2Fmukeshpilaniya.github.io%2Fposts%2FCalculator-With-DevOps-Tool-Chain%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmukeshpilaniya.github.io%2Fposts%2FCalculator-With-DevOps-Tool-Chain%2F&text=Calculator+With+Devops+Tool+Chain+-+pilaniya%40home%3A~%24" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Go-Schedular/">Go Schedular</a><li><a href="/posts/Solving-modern-programming-challenges-with-Go/">Solving Modern Programming Challenges With Go</a><li><a href="/posts/Classroom-Management-System/">Classroom Management System</a><li><a href="/posts/Calculator-With-DevOps-Tool-Chain/">Calculator With Devops Tool Chain</a><li><a href="/posts/CP-competitive-programming-time-complexity/">Cp Competitive programming time Complexity</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/hibernate/">hibernate</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jenkins/">jenkins</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/cp/">cp</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/golang/">golang</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Flight-Ticket-Reservation/"><div class="card-body"> <em class="small" data-ts="1581877800" data-df="ll" > Feb 17, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Flight Ticket Reservation</h3><div class="text-muted small"><p> Github:- https://github.com/mukeshpilaniya/FlightApi Flight Ticket Reservation Description Design and implement an application to reserve flights based on source, destination and date. The applic...</p></div></div></a></div><div class="card"> <a href="/posts/Classroom-Management-System/"><div class="card-body"> <em class="small" data-ts="1583951400" data-df="ll" > Mar 12, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Classroom Management System</h3><div class="text-muted small"><p> Github:- https://github.com/mukeshpilaniya/cms Login Only Admin, Prof, SAC,TAs, Committees can login Admin Enter timetable details in database(Fixed for the sem) If a particular classroom (wh...</p></div></div></a></div><div class="card"> <a href="/posts/Auth/"><div class="card-body"> <em class="small" data-ts="1643999400" data-df="ll" > Feb 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Authentication Service</h3><div class="text-muted small"><p> DockerHub Profile: https://hub.docker.com/repository/docker/pilaniya1337/authservice GitHub Profile:https://github.com/mukeshpilaniya/auth MakeFile Start the application make up ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Classroom-Management-System/" class="btn btn-outline-primary" prompt="Older"><p>Classroom Management System</p></a> <a href="/posts/CP-competitive-programming-time-complexity/" class="btn btn-outline-primary" prompt="Newer"><p>Cp Competitive programming time Complexity</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://www.linkedin.com/in/mukeshpilaniya">Mukesh Pilaniya</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/hibernate/">hibernate</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jenkins/">jenkins</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/cp/">cp</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/golang/">golang</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-HJFWMSHT9C"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-HJFWMSHT9C'); }); </script>
